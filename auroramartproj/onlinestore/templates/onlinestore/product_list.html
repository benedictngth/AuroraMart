{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AuroraMart | {{ page_title }}</title>
    <link rel="stylesheet" href="{% static 'onlinestore/css/style.css' %}" />
  </head>
  <body>
    {% include 'onlinestore/_navBar.html'%}

    <main class="product-listing-content">
      <h1 class="page-header">{{ page_title }}</h1>

      {% if products %}
      <div class="product-grid">
        {% for product in products %}
        <div class="product-card">
          <h2 class="product-name">
            {% if product.pk %}
            <a href="{% url 'product_detail' product.pk %}"
              >{{ product.product_name }}</a
            >
            {% else %} {{ product.product_name }} (Invalid Product) {% endif %}
          </h2>
          <p class="product-sku">SKU: {{ product.sku_code }}</p>
          <p class="product-price">${{ product.unit_price }}</p>
          <p class="product-rating">
            Rating: â˜… {{ product.product_rating|default:"N/A" }}
          </p>

          {% if product.quantity_on_hand == 0 %}
          <p class="product-stock stock-out">Out of Stock</p>
          {% elif product.quantity_on_hand < 10 %}
          <p class="product-stock stock-low">
            Low Stock ({{ product.quantity_on_hand }} units)
          </p>
          {% else %}
          <p class="product-stock stock-available">Available</p>
          {% endif %}
          <button class="add-to-cart-btn">Add to Cart</button>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <p class="no-results">
        Sorry, no products were found matching your criteria.
      </p>
      {% endif %}
    </main>
  </body>
</html>
